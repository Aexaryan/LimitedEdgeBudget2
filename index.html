<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MASTER PRODUCTION BUDGET INFOGRAPHIC</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0d1117; /* Dark background */
            color: #c9d1d9; /* Light text */
        }
        .section-card {
            background-color: #161b22; /* Slightly lighter dark card */
            border: 1px solid #30363d;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .section-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 12px rgba(0, 0, 0, 0.4);
        }
        .progress-bar-bg {
            background-color: #30363d;
        }
        .progress-bar-fill {
            background-color: #2ea44f; /* Green accent color */
            transition: width 1s ease-out;
        }
        .production-detail-card {
            background-color: #21262d;
            height: 100%; /* Ensure cards are uniform height */
        }
        .sub-category-header {
            font-size: 0.9rem;
            color: #8b949e;
            font-weight: 600;
            margin-top: 10px;
            padding-top: 5px;
            border-top: 1px dashed #30363d;
        }
        .breakdown-list {
            margin-top: 8px;
            padding-left: 0;
            list-style: none;
        }
        .breakdown-list li {
            font-size: 0.75rem;
            color: #8b949e;
            display: flex;
            justify-content: space-between;
            padding-top: 2px;
        }
        .breakdown-list .breakdown-cost {
            font-weight: 500;
            color: #c9d1d9;
        }
    </style>
</head>
<body>

<div class="container mx-auto p-4 sm:p-8 lg:p-12">
    <header class="text-center mb-10">
        <h1 class="text-3xl sm:text-4xl lg:text-5xl font-extrabold text-[#2ea44f] mb-2">LIMIT EDGE ‚Äî MASTER PRODUCTION BUDGET (FINAL)</h1>
        <h2 class="text-xl sm:text-2xl font-light text-gray-400">Total Project Value: $554,950 (UPDATED)</h2>
        <div class="h-1 w-24 bg-gray-600 mx-auto mt-4 rounded-full"></div>
    </header>

    <!-- Grand Total -->
    <div class="section-card p-6 mb-10 rounded-xl text-center">
        <p class="text-lg font-semibold text-gray-400">GRAND TOTAL BUDGET ALLOCATION</p>
        <p class="text-5xl sm:text-6xl font-black text-white mt-2 mb-1">$554,950</p>
        <p class="text-xl font-bold text-[#2ea44f]">(100%)</p>
    </div>

    <!-- Main Category Overview -->
    <div class="mb-12">
        <h3 class="text-2xl font-bold text-gray-300 mb-6 border-b border-gray-700 pb-2">6 Major Budget Categories</h3>
        <div id="main-budget-bars" class="space-y-4">
            <!-- Bars will be inserted here by JavaScript -->
        </div>
    </div>

    <!-- Detailed Breakdowns for 1, 3, 4, 5, 6 -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
        
        <!-- 1. Pre-Production Details -->
        <div class="lg:col-span-1">
            <h3 class="text-xl font-bold text-gray-300 mb-4 border-b border-gray-700 pb-2">1. Pre-Production ($33,000 / 5.95%)</h3>
            <p class="text-sm text-gray-500 mb-3">Full planning phase, concept development, and casting prep.</p>
            <div class="section-card p-4 rounded-lg space-y-2">
                
                <!-- 1.1 CREATIVE DEVELOPMENT -->
                <div class="sub-category-header">1.1 Creative Development ($6,000 / 1.08%)</div>
                <ul class="breakdown-list space-y-1 mt-1">
                    <li><span class="breakdown-name">Concept & show structure</span><span class="breakdown-cost">$2,500 <span class="text-xs text-[#2ea44f]">(0.45%)</span></span></li>
                    <li><span class="breakdown-name">Episode format breakdown (30 eps)</span><span class="breakdown-cost">$1,500 <span class="text-xs text-[#2ea44f]">(0.27%)</span></span></li>
                    <li><span class="breakdown-name">Challenge design (water/endurance)</span><span class="breakdown-cost">$2,000 <span class="text-xs text-[#2ea44f]">(0.36%)</span></span></li>
                </ul>
                
                <!-- 1.2 CASTING & TALENT PREP -->
                <div class="sub-category-header">1.2 Casting & Talent Prep ($2,000 / 0.36%)</div>
                 <ul class="breakdown-list space-y-1 mt-1">
                    <li><span class="breakdown-name">Athlete casting & interviews</span><span class="breakdown-cost">$1,000 <span class="text-xs text-[#2ea44f]">(0.18%)</span></span></li>
                    <li><span class="breakdown-name">Host casting</span><span class="breakdown-cost">$500 <span class="text-xs text-[#2ea44f]">(0.09%)</span></span></li>
                    <li><span class="breakdown-name">Extras / walk-ons</span><span class="breakdown-cost">$500 <span class="text-xs text-[#2ea44f]">(0.09%)</span></span></li>
                </ul>

                <!-- 1.3 LOCATION SCOUTING -->
                <div class="sub-category-header">1.3 Location Scouting ($5,500 / 0.99%)</div>
                 <ul class="breakdown-list space-y-1 mt-1">
                    <li><span class="breakdown-name">Travel (Spain scouting)</span><span class="breakdown-cost">$3,000 <span class="text-xs text-[#2ea44f]">(0.54%)</span></span></li>
                    <li><span class="breakdown-name">Accommodation (scouting)</span><span class="breakdown-cost">$1,500 <span class="text-xs text-[#2ea44f]">(0.27%)</span></span></li>
                    <li><span class="breakdown-name">Fixer / location consultant</span><span class="breakdown-cost">$1,000 <span class="text-xs text-[#2ea44f]">(0.18%)</span></span></li>
                </ul>
                
                <!-- 1.4 SET / OBSTACLE ENGINEERING -->
                <div class="sub-category-header">1.4 Set & Obstacle Engineering ($12,000 / 2.16%)</div>
                 <ul class="breakdown-list space-y-1 mt-1">
                    <li><span class="breakdown-name">Water challenge engineering</span><span class="breakdown-cost">$4,000 <span class="text-xs text-[#2ea44f]">(0.72%)</span></span></li>
                    <li><span class="breakdown-name">Construction materials</span><span class="breakdown-cost">$5,000 <span class="text-xs text-[#2ea44f]">(0.90%)</span></span></li>
                    <li><span class="breakdown-name">Platforms / sand / site setup</span><span class="breakdown-cost">$2,000 <span class="text-xs text-[#2ea44f]">(0.36%)</span></span></li>
                    <li><span class="breakdown-name">Safety ropes & padding</span><span class="breakdown-cost">$1,000 <span class="text-xs text-[#2ea44f]">(0.18%)</span></span></li>
                </ul>
                
                <!-- 1.5 ADMIN, PLANNING, SCHEDULING -->
                <div class="sub-category-header">1.5 Admin, Planning, Scheduling ($3,000 / 0.54%)</div>
                
                <!-- 1.6 MARKETING PREP -->
                <div class="sub-category-header">1.6 Marketing Prep (teaser assets) ($4,500 / 0.81%)</div>
            </div>
        </div>

        <!-- 3. Post-Production -->
        <div class="lg:col-span-1">
            <h3 class="text-xl font-bold text-gray-300 mb-4 border-b border-gray-700 pb-2">3. Post-Production ($163,800 / 29.52%)</h3>
            <p class="text-sm text-gray-500 mb-3">Finalizing 30 episodes for delivery.</p>
            <div class="section-card p-4 rounded-lg space-y-3">
                
                <div class="sub-category-header mt-0 border-t-0">3.1 Editing ($86,000 / 15.50%)</div>
                <ul class="breakdown-list space-y-1 mt-1">
                    <li><span class="breakdown-name">Lead editor</span><span class="breakdown-cost">$61,000 <span class="text-xs text-[#2ea44f]">(10.99%)</span></span></li>
                    <li><span class="breakdown-name">Assistant editor</span><span class="breakdown-cost">$25,000 <span class="text-xs text-[#2ea44f]">(4.51%)</span></span></li>
                </ul>

                <div class="sub-category-header">3.2 Sound ($24,000 / 4.32%)</div>
                <ul class="breakdown-list space-y-1 mt-1">
                    <li><span class="breakdown-name">Sound editing</span><span class="breakdown-cost">$12,000 <span class="text-xs text-[#2ea44f]">(2.16%)</span></span></li>
                    <li><span class="breakdown-name">Re-recording mix</span><span class="breakdown-cost">$12,000 <span class="text-xs text-[#2ea44f]">(2.16%)</span></span></li>
                </ul>

                <div class="sub-category-header">3.3 Music Licensing ($4,000 / 0.72%)</div>
                
                <div class="sub-category-header">3.4 Color Grading ($21,000 / 3.78%)</div>
                
                <div class="sub-category-header">3.5 Motion Graphics & Titles ($18,000 / 3.24%)</div>
                
                <div class="sub-category-header">3.6 Mastering / QC / Deliverables ($10,800 / 1.95%)</div>

                <div class="h-px bg-gray-700 my-4"></div>
                
                <!-- 6. Contingency -->
                <div class="text-lg font-semibold text-[#2ea44f]">6. Contingency (Risk Fund) ($20,000 / 3.61%)</div>
                <div class="text-sm text-gray-500 mb-1">Covers unexpected costs, set at 3.61% of total.</div>
            </div>
        </div>

        <!-- 4. Marketing & 5. Legal -->
        <div class="lg:col-span-1">
            <h3 class="text-xl font-bold text-gray-300 mb-4 border-b border-gray-700 pb-2">4. Marketing & 5. Legal</h3>
            <div class="section-card p-4 rounded-lg space-y-3">
                
                <!-- 4. MARKETING & DISTRIBUTION -->
                <div class="text-lg font-semibold text-[#2ea44f]">4. Marketing & Distribution ($33,600 / 6.05%)</div>
                <div class="sub-category-header mt-0 border-t-0">4.1 PR & Media Buying ($15,000 / 2.70%)</div>
                <ul class="breakdown-list space-y-1 mt-1">
                    <li><span class="breakdown-name">Press release prep</span><span class="breakdown-cost">$2,500 <span class="text-xs text-[#2ea44f]">(0.45%)</span></span></li>
                    <li><span class="breakdown-name">Distribution to TV/press</span><span class="breakdown-cost">$2,000 <span class="text-xs text-[#2ea44f]">(0.36%)</span></span></li>
                    <li><span class="breakdown-name">Sponsored media articles</span><span class="breakdown-cost">$3,000 <span class="text-xs text-[#2ea44f]">(0.54%)</span></span></li>
                    <li><span class="breakdown-name">News outreach</span><span class="breakdown-cost">$2,500 <span class="text-xs text-[#2ea44f]">(0.45%)</span></span></li>
                    <li><span class="breakdown-name">Online media ad placement</span><span class="breakdown-cost">$5,000 <span class="text-xs text-[#2ea44f]">(0.90%)</span></span></li>
                </ul>

                <div class="sub-category-header">4.2 Social Media Campaigns ($8,000 / 1.44%)</div>
                <ul class="breakdown-list space-y-1 mt-1">
                    <li><span class="breakdown-name">Instagram ads / TikTok ads</span><span class="breakdown-cost">$4,000 <span class="text-xs text-[#2ea44f]">(0.72%)</span></span></li>
                    <li><span class="breakdown-name">YouTube pre-roll</span><span class="breakdown-cost">$1,500 <span class="text-xs text-[#2ea44f]">(0.27%)</span></span></li>
                    <li><span class="breakdown-name">Influencer promo</span><span class="breakdown-cost">$1,500 <span class="text-xs text-[#2ea44f]">(0.27%)</span></span></li>
                    <li><span class="breakdown-name">Content creation</span><span class="breakdown-cost">$1,000 <span class="text-xs text-[#2ea44f]">(0.18%)</span></span></li>
                </ul>

                <div class="sub-category-header">4.3 Trailer & Advertising Materials ($10,600 / 1.91%)</div>
                <ul class="breakdown-list space-y-1 mt-1">
                    <li><span class="breakdown-name">Trailer editing & color</span><span class="breakdown-cost">$5,300 <span class="text-xs text-[#2ea44f]">(0.95%)</span></span></li>
                    <li><span class="breakdown-name">Trailer music license</span><span class="breakdown-cost">$1,300 <span class="text-xs text-[#2ea44f]">(0.23%)</span></span></li>
                    <li><span class="breakdown-name">Trailer motion graphics</span><span class="breakdown-cost">$2,000 <span class="text-xs text-[#2ea44f]">(0.36%)</span></span></li>
                    <li><span class="breakdown-name">Thumbnail / poster design</span><span class="breakdown-cost">$1,000 <span class="text-xs text-[#2ea44f]">(0.18%)</span></span></li>
                    <li><span class="breakdown-name">Subtitles / captions</span><span class="breakdown-cost">$1,000 <span class="text-xs text-[#2ea44f]">(0.18%)</span></span></li>
                </ul>
                
                <div class="h-px bg-gray-700 my-2"></div>
                
                <!-- 5. LEGAL & ACCOUNTING -->
                <div class="text-lg font-semibold text-[#2ea44f]">5. Legal & Accounting ($10,800 / 1.95%)</div>
                <div class="sub-category-header mt-0 border-t-0">5.1 Legal ($6,000 / 1.08%)</div>
                <ul class="breakdown-list space-y-1 mt-1">
                    <li><span class="breakdown-name">Contracts (Crew, Athletes, Host)</span><span class="breakdown-cost">$2,500 <span class="text-xs text-[#2ea44f]">(0.45%)</span></span></li>
                    <li><span class="breakdown-name">Location agreements</span><span class="breakdown-cost">$1,000 <span class="text-xs text-[#2ea44f]">(0.18%)</span></span></li>
                    <li><span class="breakdown-name">Release forms (image, liability)</span><span class="breakdown-cost">$1,000 <span class="text-xs text-[#2ea44f]">(0.18%)</span></span></li>
                    <li><span class="breakdown-name">Insurance legal review</span><span class="breakdown-cost">$1,000 <span class="text-xs text-[#2ea44f]">(0.18%)</span></span></li>
                    <li><span class="breakdown-name">Misc consultation</span><span class="breakdown-cost">$500 <span class="text-xs text-[#2ea44f]">(0.09%)</span></span></li>
                </ul>

                <div class="sub-category-header">5.2 Accounting ($4,800 / 0.86%)</div>
                <ul class="breakdown-list space-y-1 mt-1">
                    <li><span class="breakdown-name">Production controller</span><span class="breakdown-cost">$3,000 <span class="text-xs text-[#2ea44f]">(0.54%)</span></span></li>
                    <li><span class="breakdown-name">Tax documentation</span><span class="breakdown-cost">$800 <span class="text-xs text-[#2ea44f]">(0.14%)</span></span></li>
                    <li><span class="breakdown-name">Payroll management</span><span class="breakdown-cost">$1,000 <span class="text-xs text-[#2ea44f]">(0.18%)</span></span></li>
                </ul>
            </div>
        </div>
    </div>

    <!-- 2. Production Details (The largest segment) -->
    <div class="mt-12">
        <h3 class="text-2xl font-bold text-gray-300 mb-6 border-b border-yellow-500 pb-2">2. PRODUCTION: THE CORE EXPENDITURE ($293,750 / 52.93%)</h3>
        <p class="text-gray-400 mb-6">28 days of full operation, with adjusted crew and equipment costs.</p>
        <div id="production-details" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
            <!-- Production details will be inserted here by JavaScript -->
        </div>
    </div>

</div>

<script>
    // Budget data structure updated for $554,950 total
    const TOTAL_BUDGET = 554950;

    const budgetData = [
        { name: '1. PRE-PRODUCTION', cost: 33000, percentage: (33000 / TOTAL_BUDGET) * 100 },
        { name: '2. PRODUCTION', cost: 293750, percentage: (293750 / TOTAL_BUDGET) * 100 }, // UPDATED COST
        { name: '3. POST-PRODUCTION (30 Episodes)', cost: 163800, percentage: (163800 / TOTAL_BUDGET) * 100 },
        { name: '4. MARKETING & DISTRIBUTION', cost: 33600, percentage: (33600 / TOTAL_BUDGET) * 100 },
        { name: '5. LEGAL & ACCOUNTING', cost: 10800, percentage: (10800 / TOTAL_BUDGET) * 100 },
        { name: '6. CONTINGENCY', cost: 20000, percentage: (20000 / TOTAL_BUDGET) * 100 },
    ];

    const formatter = new Intl.NumberFormat('en-US', {
        style: 'currency',
        currency: 'USD',
        minimumFractionDigits: 0,
        maximumFractionDigits: 0,
    });
    
    // Helper function to calculate percentage
    const calculatePerc = (cost) => (cost / TOTAL_BUDGET) * 100;

    // --- Detailed Production Data (17 Items) ---
    const productionItems = [
        // 2.1
        { item: '2.1 HOST FEES', cost: 61700, percentage: calculatePerc(61700), icon: 'üé§', 
          breakdown: [
            { name: 'Anchor presenter (fixed salary)', cost: 61700, perc: calculatePerc(61700) }
          ]
        },
        // 2.2
        { item: '2.2 COMPETITOR FEES', cost: 24000, percentage: calculatePerc(24000), icon: 'üèÉ', 
          breakdown: [
            { name: '12 athletes √ó $500/wk √ó 4 weeks', cost: 24000, perc: calculatePerc(24000) }
          ]
        },
        // 2.3
        { item: '2.3 DIRECTORIAL & CREATIVE', cost: 24080, percentage: calculatePerc(24080), icon: 'üí°', 
          breakdown: [
            { name: 'Director', cost: 7000, perc: calculatePerc(7000) },
            { name: 'Producer / Showrunner', cost: 7000, perc: calculatePerc(7000) },
            { name: 'Script Writer / Assistant Producer', cost: 5040, perc: calculatePerc(5040) },
            { name: 'Production Manager', cost: 5040, perc: calculatePerc(5040) },
          ]
        },
        // 2.4
        { item: '2.4 CAMERA DEPARTMENT', cost: 30000, percentage: calculatePerc(30000), icon: 'üé•', 
          breakdown: [
            { name: '4√ó Camera Operators', cost: 20000, perc: calculatePerc(20000) },
            { name: 'Focus Puller', cost: 4000, perc: calculatePerc(4000) },
            { name: 'GoPro/Gimbal Tech', cost: 3000, perc: calculatePerc(3000) },
            { name: 'DIT / Media Manager', cost: 3000, perc: calculatePerc(3000) },
          ]
        },
        // 2.5
        { item: '2.5 DRONE UNIT', cost: 6000, percentage: calculatePerc(6000), icon: 'üöÅ', 
          breakdown: [
            { name: 'Drone Pilot', cost: 4800, perc: calculatePerc(4800) },
            { name: 'Spotter', cost: 1200, perc: calculatePerc(1200) },
          ]
        },
        // 2.6
        { item: '2.6 SOUND DEPARTMENT', cost: 8000, percentage: calculatePerc(8000), icon: 'üîä', 
          breakdown: [
            { name: 'Sound Recordist', cost: 5600, perc: calculatePerc(5600) },
            { name: 'Boom Operator', cost: 2400, perc: calculatePerc(2400) },
          ]
        },
        // 2.7
        { item: '2.7 PRODUCTION STAFF', cost: 10000, percentage: calculatePerc(10000), icon: 'üßë‚Äçüíª', 
          breakdown: [
            { name: 'Floor Manager / AD', cost: 3500, perc: calculatePerc(3500) },
            { name: '2√ó PAs', cost: 3000, perc: calculatePerc(3000) },
            { name: '2√ó Drivers / Runners', cost: 3500, perc: calculatePerc(3500) },
          ]
        },
        // 2.8
        { item: '2.8 MAKEUP, SAFETY & MEDICAL', cost: 10000, percentage: calculatePerc(10000), icon: '‚öïÔ∏è', 
          breakdown: [
            { name: 'Makeup Artist', cost: 2200, perc: calculatePerc(2200) },
            { name: 'Lifeguard / Water Safety', cost: 2800, perc: calculatePerc(2800) },
            { name: 'Paramedic', cost: 5000, perc: calculatePerc(5000) },
          ]
        },
        // 2.9
        { item: '2.9 GYM RENTAL', cost: 10000, percentage: calculatePerc(10000), icon: 'üèãÔ∏è', 
          breakdown: [
            { name: '10 days access to training facility', cost: 10000, perc: calculatePerc(10000) }
          ]
        },
        // 2.10 - UPDATED DETAIL AND COST
        { item: '2.10 ACCOMMODATION', cost: 28200, percentage: calculatePerc(28200), icon: 'üè†', 
          breakdown: [
            { name: 'Main Accommodation (Villas A/B, Apartments)', cost: 22400, perc: calculatePerc(22400) },
            { name: 'Hotel Nights for Travel Days', cost: 3200, perc: calculatePerc(3200) },
            { name: 'Airbnb / Booking Platform Fees', cost: 1200, perc: calculatePerc(1200) },
            { name: 'Damage Insurance / Deposits', cost: 1000, perc: calculatePerc(1000) },
            { name: 'Local Taxes & Tourist Fees', cost: 400, perc: calculatePerc(400) },
          ]
        },
        // 2.11
        { item: '2.11 CATERING', cost: 18000, percentage: calculatePerc(18000), icon: 'üçΩÔ∏è', 
          breakdown: [
            { name: '25‚Äì30 crew & athletes √ó ‚Ç¨30/day average', cost: 18000, perc: calculatePerc(18000) }
          ]
        },
        // 2.12
        { item: '2.12 TRANSPORTATION', cost: 35500, percentage: calculatePerc(35500), icon: 'üöå', 
          breakdown: [
            { name: '2√ó Vans (28 days)', cost: 7000, perc: calculatePerc(7000) },
            { name: 'Production car', cost: 1500, perc: calculatePerc(1500) },
            { name: 'Fuel (28 days)', cost: 3500, perc: calculatePerc(3500) },
            { name: 'Airport transfers', cost: 1500, perc: calculatePerc(1500) },
            { name: 'Logistics truck', cost: 1500, perc: calculatePerc(1500) },
            { name: 'Competitor flights', cost: 7500, perc: calculatePerc(7500) },
            { name: 'Crew flights', cost: 3000, perc: calculatePerc(3000) },
          ]
        },
        // 2.13
        { item: '2.13 EQUIPMENT RENTAL', cost: 15000, percentage: calculatePerc(15000), icon: '‚öôÔ∏è', 
          breakdown: [
            { name: 'Cameras + Lenses', cost: 6500, perc: calculatePerc(6500) },
            { name: 'Audio gear', cost: 2000, perc: calculatePerc(2000) },
            { name: 'Lighting kit', cost: 1500, perc: calculatePerc(1500) },
            { name: 'GoPros / Action Gear', cost: 1500, perc: calculatePerc(1500) },
            { name: 'Drone Rental', cost: 2000, perc: calculatePerc(2000) },
            { name: 'Accessories / Rigs', cost: 1500, perc: calculatePerc(1500) },
          ]
        },
        // 2.14
        { item: '2.14 INSURANCE & PERMITS', cost: 8000, percentage: calculatePerc(8000), icon: 'üìÑ', 
          breakdown: [
            { name: 'Liability Insurance', cost: 3500, perc: calculatePerc(3500) },
            { name: 'Drone Permits', cost: 800, perc: calculatePerc(800) },
            { name: 'Location Permits', cost: 2200, perc: calculatePerc(2200) },
            { name: 'Municipal Fees', cost: 1500, perc: calculatePerc(1500) },
          ]
        },
        // 2.15
        { item: '2.15 BASECAMP / PRODUCTION OFFICE', cost: 2000, percentage: calculatePerc(2000), icon: '‚õ∫', 
          breakdown: [
            { name: 'Pop-up tents / shade', cost: 600, perc: calculatePerc(600) },
            { name: 'Tables & chairs', cost: 400, perc: calculatePerc(400) },
            { name: 'Small generator / power', cost: 600, perc: calculatePerc(600) },
            { name: 'Water & ice station', cost: 400, perc: calculatePerc(400) },
          ]
        },
        // 2.16
        { item: '2.16 DATA STORAGE / BACKUP', cost: 2500, percentage: calculatePerc(2500), icon: 'üíæ', 
          breakdown: [
            { name: 'RAID/SSD drives (~20TB)', cost: 1500, perc: calculatePerc(1500) },
            { name: 'Cloud storage (2 months)', cost: 700, perc: calculatePerc(700) },
            { name: 'Backup docks/readers', cost: 300, perc: calculatePerc(300) },
          ]
        },
        // 2.17
        { item: '2.17 MISC. PRODUCTION', cost: 10770, percentage: calculatePerc(10770), icon: 'üí∞', 
          breakdown: [
            { name: 'Props & set dressing', cost: 2500, perc: calculatePerc(2500) },
            { name: 'Obstacle repairs / maintenance', cost: 3500, perc: calculatePerc(3500) },
            { name: 'Media cards & batteries', cost: 2270, perc: calculatePerc(2270) },
            { name: 'Emergency purchases', cost: 2500, perc: calculatePerc(2500) },
          ]
        },
    ];

    /**
     * Renders a progress bar component.
     */
    function renderBar(name, cost, percentage, barColor = 'bg-[#2ea44f]') {
        const costStr = formatter.format(cost);
        const percentStr = `${percentage.toFixed(2)}%`;
        const widthStyle = `width: ${Math.min(percentage, 100)}%;`; // Cap at 100%

        const barHtml = `
            <div class="section-card p-4 rounded-lg">
                <div class="flex justify-between items-center mb-1">
                    <span class="text-base font-semibold text-gray-200">${name}</span>
                    <div class="text-right">
                        <span class="text-lg font-bold text-white">${costStr}</span>
                        <span class="text-sm font-semibold text-[#2ea44f] ml-2">${percentStr}</span>
                    </div>
                </div>
                <div class="progress-bar-bg h-3 rounded-full overflow-hidden">
                    <div class="progress-bar-fill h-full rounded-full ${barColor}" style="${widthStyle}"></div>
                </div>
            </div>
        `;
        return barHtml;
    }

    /**
     * Renders the nested breakdown list.
     */
    function renderBreakdownList(breakdown) {
        if (!breakdown || breakdown.length === 0) return '';
        
        const listItems = breakdown.map(item => `
            <li>
                <span class="breakdown-name">${item.name}</span>
                <span class="breakdown-cost">${formatter.format(item.cost)} <span class="text-[#2ea44f]">(${item.perc.toFixed(2)}%)</span></span>
            </li>
        `).join('');

        return `<ul class="breakdown-list space-y-1 mt-3">${listItems}</ul>`;
    }

    /**
     * Renders a detailed card for a single production sub-item.
     */
    function renderDetailCard(itemData) {
        const costStr = formatter.format(itemData.cost);
        const percentStr = `${itemData.percentage.toFixed(2)}%`;
        const breakdownHtml = renderBreakdownList(itemData.breakdown);

        return `
            <div class="production-detail-card p-5 rounded-xl border border-gray-700 flex flex-col justify-between">
                <div>
                    <div class="flex items-center space-x-3 mb-2">
                        <span class="text-2xl">${itemData.icon}</span>
                        <h4 class="text-base font-bold text-gray-100">${itemData.item}</h4>
                    </div>
                    <p class="text-3xl font-extrabold text-yellow-400">${costStr}</p>
                    <p class="text-sm text-gray-400 font-medium">of Total Budget: <span class="text-[#2ea44f]">${percentStr}</span></p>
                </div>
                
                <!-- Detailed Breakdown -->
                ${breakdownHtml}
            </div>
        `;
    }

    // 1. Render Main Budget Bars
    const mainBudgetContainer = document.getElementById('main-budget-bars');
    const mainBarHtml = budgetData.map(data => {
        // Use yellow accent for the largest item (Production)
        const color = data.name.includes('PRODUCTION') && data.percentage > 50 ? 'bg-yellow-500' : 'bg-[#2ea44f]';
        return renderBar(data.name, data.cost, data.percentage, color);
    }).join('');
    mainBudgetContainer.innerHTML = mainBarHtml;

    // 2. Render Production Details (Sub-Items)
    const productionDetailsContainer = document.getElementById('production-details');

    const detailCardHtml = productionItems.map(item =>
        renderDetailCard(item)
    ).join('');

    productionDetailsContainer.innerHTML = detailCardHtml;
</script>

</body>
</html>
